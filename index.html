<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DEENWAY Ebook Library</title>

  <!-- favicon -->
  <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/1705/1705004.png">
  <link rel="shortcut icon" href="https://cdn-icons-png.flaticon.com/512/1705/1705004.png">

  <!-- خطوط -->
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@700;800&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- أيقونات -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    :root {
      --primary: #0b3d91;
      --primary-light: #5ea0ff;
      --secondary: #ff6b6b;
      --accent: #10b981;
      --dark: #072227;
      --light: #ffffff;
      --gray-50: #f8fafc;
      --gray-100: #f1f5f9;
      --gray-200: #e2e8f0;
      --gray-300: #cbd5e1;
      --gray-400: #94a3b8;
      --gray-500: #64748b;
      --gray-600: #475569;
      --gray-700: #334155;
      --gray-800: #1e293b;
      --gray-900: #0f172a;
      
      --shadow-sm: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-md: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      --shadow-xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      
      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --radius-xl: 24px;
      
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      --transition-slow: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      height: 100%;
      font-family: 'Poppins', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(135deg, var(--gray-50) 0%, var(--gray-100) 100%);
      color: var(--gray-800);
      -webkit-font-smoothing: antialiased;
      line-height: 1.6;
    }

    /* زر اختيار اللغة */
    .language-selector {
      position: fixed;
      top: 24px;
      left: 24px;
      z-index: 1000;
    }

    .language-btn {
      display: flex;
      align-items: center;
      gap: 10px;
      background: var(--light);
      border: 2px solid var(--gray-200);
      border-radius: var(--radius-lg);
      padding: 12px 18px;
      cursor: pointer;
      box-shadow: var(--shadow-md);
      transition: var(--transition);
      font-weight: 600;
      color: var(--primary);
      backdrop-filter: blur(10px);
    }

    .language-btn:hover {
      box-shadow: var(--shadow-lg);
      transform: translateY(-2px);
      border-color: var(--primary-light);
    }

    .language-btn i {
      font-size: 1.2rem;
      transition: var(--transition);
    }

    .language-btn.active i {
      transform: rotate(180deg);
    }

    .language-dropdown {
      position: absolute;
      top: 100%;
      left: 0;
      margin-top: 8px;
      background: var(--light);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-xl);
      width: 200px;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: var(--transition);
      border: 1px solid var(--gray-200);
      overflow: hidden;
      backdrop-filter: blur(10px);
    }

    .language-dropdown.active {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .language-option {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px 18px;
      cursor: pointer;
      transition: var(--transition);
      border-bottom: 1px solid var(--gray-100);
    }

    .language-option:last-child {
      border-bottom: none;
    }

    .language-option:hover {
      background: var(--primary-light);
      color: white;
    }

    .language-option.active {
      background: linear-gradient(135deg, var(--primary), var(--primary-light));
      color: white;
      font-weight: 600;
    }

    .flag {
      width: 28px;
      height: 20px;
      border-radius: 4px;
      object-fit: cover;
      box-shadow: var(--shadow-sm);
    }

    /* الهيدر الرئيسي */
    .main-header {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
      color: white;
      padding: 80px 20px 60px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .main-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" fill="%23ffffff" opacity="0.1"><polygon points="1000,100 1000,0 0,100"/></svg>');
      background-size: cover;
    }

    .header-content {
      position: relative;
      z-index: 2;
      max-width: 800px;
      margin: 0 auto;
    }

    h1.site-title {
      font-size: 3.5rem;
      font-weight: 800;
      margin-bottom: 16px;
      background: linear-gradient(135deg, #ffffff 0%, rgba(255,255,255,0.9) 100%);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 0 4px 8px rgba(0,0,0,0.1);
      font-family: 'Merriweather', serif;
    }

    .site-desc {
      font-size: 1.2rem;
      opacity: 0.9;
      margin-bottom: 8px;
      font-weight: 300;
    }

    .site-subdesc {
      font-size: 1rem;
      opacity: 0.8;
      font-weight: 300;
    }

    /* المحتوى الرئيسي */
    .main-content {
      max-width: 1400px;
      margin: -40px auto 40px;
      padding: 0 20px;
      position: relative;
      z-index: 10;
    }

    /* شريط البحث */
    .search-section {
      background: var(--light);
      border-radius: var(--radius-xl);
      padding: 30px;
      margin-bottom: 40px;
      box-shadow: var(--shadow-lg);
      border: 1px solid var(--gray-200);
    }

    .search-container {
      max-width: 600px;
      margin: 0 auto;
      position: relative;
    }

    .search-box {
      width: 100%;
      padding: 18px 24px 18px 60px;
      border: 2px solid var(--gray-200);
      border-radius: var(--radius-lg);
      font-size: 1.1rem;
      background: var(--gray-50);
      transition: var(--transition);
      font-weight: 500;
    }

    .search-box:focus {
      outline: none;
      border-color: var(--primary-light);
      box-shadow: 0 0 0 4px rgba(94, 160, 255, 0.2);
      background: var(--light);
    }

    .search-icon {
      position: absolute;
      right: 24px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--gray-400);
      font-size: 1.2rem;
    }

    /* شبكة الكتب */
    .books-section {
      margin-top: 20px;
    }

    .section-title {
      font-size: 2rem;
      font-weight: 700;
      color: var(--dark);
      margin-bottom: 30px;
      text-align: center;
      position: relative;
    }

    .section-title::after {
      content: '';
      display: block;
      width: 80px;
      height: 4px;
      background: linear-gradient(135deg, var(--primary), var(--primary-light));
      margin: 12px auto;
      border-radius: 2px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 30px;
      align-items: start;
    }

    /* بطاقة الكتاب */
    .card {
      background: var(--light);
      border-radius: var(--radius-xl);
      overflow: hidden;
      box-shadow: var(--shadow-md);
      transition: var(--transition);
      display: flex;
      flex-direction: column;
      height: 100%;
      border: 1px solid var(--gray-200);
      position: relative;
    }

    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(135deg, var(--primary), var(--primary-light));
      z-index: 2;
    }

    .card:hover {
      transform: translateY(-12px);
      box-shadow: var(--shadow-xl);
    }

    .cover-container {
      position: relative;
      padding-bottom: 140%;
      background: linear-gradient(135deg, var(--gray-100), var(--gray-200));
      overflow: hidden;
    }

    .cover {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: var(--transition-slow);
    }

    .card:hover .cover {
      transform: scale(1.08);
    }

    .book-badges {
      position: absolute;
      top: 16px;
      left: 16px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      z-index: 3;
    }

    .language-badge {
      background: rgba(11, 61, 145, 0.95);
      color: white;
      padding: 6px 12px;
      border-radius: var(--radius-sm);
      font-size: 0.8rem;
      font-weight: 600;
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow-sm);
    }

    .status-badge {
      background: rgba(16, 185, 129, 0.95);
      color: white;
      padding: 6px 12px;
      border-radius: var(--radius-sm);
      font-size: 0.8rem;
      font-weight: 600;
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow-sm);
    }

    .book-info {
      padding: 24px;
      display: flex;
      flex-direction: column;
      gap: 16px;
      flex-grow: 1;
    }

    .book-title {
      font-weight: 700;
      font-size: 1.3rem;
      margin: 0;
      color: var(--dark);
      font-family: 'Merriweather', serif;
      line-height: 1.4;
    }

    .book-description {
      font-size: 0.95rem;
      color: var(--gray-600);
      line-height: 1.6;
      margin: 0;
      flex-grow: 1;
    }

    .book-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: 16px;
      border-top: 1px solid var(--gray-200);
    }

    .book-pages {
      display: flex;
      align-items: center;
      gap: 6px;
      color: var(--gray-500);
      font-size: 0.9rem;
    }

    .book-actions {
      display: flex;
      gap: 12px;
    }

    .btn {
      border: none;
      padding: 12px 20px;
      border-radius: var(--radius-md);
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      gap: 8px;
      align-items: center;
      text-decoration: none;
      font-size: 0.95rem;
      transition: var(--transition);
      justify-content: center;
    }

    .btn-download {
      background: linear-gradient(135deg, var(--primary), var(--primary-light));
      color: white;
      box-shadow: var(--shadow-md);
      flex: 1;
    }

    .btn-download:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    .btn-preview {
      background: var(--gray-100);
      color: var(--gray-700);
      border: 1px solid var(--gray-300);
    }

    .btn-preview:hover {
      background: var(--gray-200);
      transform: translateY(-2px);
    }

    .btn[aria-disabled="true"] {
      opacity: 0.6;
      pointer-events: none;
      cursor: not-allowed;
      background: var(--gray-300);
    }

    /* رسالة عدم العثور على نتائج */
    .no-results {
      text-align: center;
      padding: 80px 40px;
      color: var(--gray-500);
      grid-column: 1 / -1;
    }

    .no-results-icon {
      font-size: 4rem;
      margin-bottom: 20px;
      opacity: 0.5;
    }

    .no-results h3 {
      font-size: 1.5rem;
      margin-bottom: 12px;
      color: var(--gray-600);
    }

    .no-results p {
      font-size: 1.1rem;
      max-width: 500px;
      margin: 0 auto;
    }

    /* الفوتر */
    .footer {
      background: var(--dark);
      color: white;
      padding: 60px 20px 40px;
      text-align: center;
      margin-top: 80px;
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
    }

    .footer-logo {
      font-size: 2rem;
      font-weight: 800;
      margin-bottom: 16px;
      background: linear-gradient(135deg, var(--primary-light), var(--accent));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      font-family: 'Merriweather', serif;
    }

    .footer-desc {
      opacity: 0.8;
      margin-bottom: 30px;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-bottom: 40px;
      flex-wrap: wrap;
    }

    .footer-link {
      color: var(--gray-300);
      text-decoration: none;
      transition: var(--transition);
    }

    .footer-link:hover {
      color: var(--primary-light);
    }

    .copyright {
      opacity: 0.6;
      font-size: 0.9rem;
      padding-top: 30px;
      border-top: 1px solid var(--gray-700);
    }

    /* التجاوب */
    @media (max-width: 1200px) {
      .grid {
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      }
    }

    @media (max-width: 768px) {
      h1.site-title {
        font-size: 2.5rem;
      }
      
      .language-selector {
        top: 16px;
        left: 16px;
      }
      
      .language-btn {
        padding: 10px 14px;
        font-size: 0.9rem;
      }
      
      .main-content {
        margin-top: -20px;
      }
      
      .search-section {
        padding: 20px;
      }
      
      .book-actions {
        flex-direction: column;
      }
    }

    @media (max-width: 480px) {
      h1.site-title {
        font-size: 2rem;
      }
      
      .grid {
        grid-template-columns: 1fr;
      }
      
      .main-header {
        padding: 60px 20px 40px;
      }
      
      .language-dropdown {
        width: 180px;
      }
    }

    :focus {
      outline: 3px solid rgba(94, 160, 255, 0.4);
      outline-offset: 2px;
      border-radius: var(--radius-md);
    }

    /* تأثيرات إضافية */
    .floating-shapes {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
    }

    .shape {
      position: absolute;
      background: linear-gradient(135deg, var(--primary-light), transparent);
      border-radius: 50%;
      opacity: 0.1;
    }

    .shape-1 {
      width: 300px;
      height: 300px;
      top: 10%;
      left: 10%;
      animation: float 20s infinite linear;
    }

    .shape-2 {
      width: 200px;
      height: 200px;
      bottom: 20%;
      right: 10%;
      animation: float 15s infinite linear reverse;
    }

    @keyframes float {
      0% {
        transform: translate(0, 0) rotate(0deg);
      }
      50% {
        transform: translate(20px, 20px) rotate(180deg);
      }
      100% {
        transform: translate(0, 0) rotate(360deg);
      }
    }
  </style>
</head>
<body>
  <!-- أشكال عائمة للخلفية -->
  <div class="floating-shapes">
    <div class="shape shape-1"></div>
    <div class="shape shape-2"></div>
  </div>

  <!-- زر اختيار اللغة -->
  <div class="language-selector">
    <div class="language-btn" id="languageBtn">
      <i class="fas fa-globe"></i>
      <span id="currentLanguage">العربية</span>
    </div>
    <div class="language-dropdown" id="languageDropdown">
      <div class="language-option active" data-lang="ar">
        <img src="https://flagcdn.com/w40/sa.png" class="flag" alt="العربية">
        <span>العربية</span>
      </div>
      <div class="language-option" data-lang="en">
        <img src="https://flagcdn.com/w40/gb.png" class="flag" alt="English">
        <span>English</span>
      </div>
      <div class="language-option" data-lang="fr">
        <img src="https://flagcdn.com/w40/fr.png" class="flag" alt="Français">
        <span>Français</span>
      </div>
      <div class="language-option" data-lang="es">
        <img src="https://flagcdn.com/w40/es.png" class="flag" alt="Español">
        <span>Español</span>
      </div>
      <div class="language-option" data-lang="de">
        <img src="https://flagcdn.com/w40/de.png" class="flag" alt="Deutsch">
        <span>Deutsch</span>
      </div>
      <div class="language-option" data-lang="tr">
        <img src="https://flagcdn.com/w40/tr.png" class="flag" alt="Türkçe">
        <span>Türkçe</span>
      </div>
      <div class="language-option" data-lang="ur">
        <img src="https://flagcdn.com/w40/pk.png" class="flag" alt="اردو">
        <span>اردو</span>
      </div>
      <div class="language-option" data-lang="id">
        <img src="https://flagcdn.com/w40/id.png" class="flag" alt="Bahasa Indonesia">
        <span>Indonesia</span>
      </div>
    </div>
  </div>

  <!-- الهيدر الرئيسي -->
  <header class="main-header">
    <div class="header-content">
      <h1 class="site-title">DEENWAY Ebook</h1>
      <p class="site-desc">One truth — eight languages</p>
      <p class="site-subdesc">مكتبة رقمية شاملة للكتب الإسلامية بلغات متعددة</p>
    </div>
  </header>

  <!-- المحتوى الرئيسي -->
  <main class="main-content">
    <!-- شريط البحث -->
    <section class="search-section">
      <div class="search-container">
        <input 
          type="text" 
          class="search-box" 
          id="searchBox"
          placeholder="ابحث عن كتاب..." 
          aria-label="بحث في الكتب"
        >
        <div class="search-icon">
          <i class="fas fa-search"></i>
        </div>
      </div>
    </section>

    <!-- قسم الكتب -->
    <section class="books-section">
      <h2 class="section-title" id="sectionTitle">أحدث الكتب</h2>
      <div class="grid" id="grid">
        <!-- سيتم ملؤه بواسطة JavaScript -->
      </div>
    </section>
  </main>

  <!-- الفوتر -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-logo">DEENWAY</div>
      <p class="footer-desc">منصة رقمية تقدم محتوى إسلامي أصيل بلغات متعددة لنشر المعرفة والهدى</p>
      
      <div class="footer-links">
        <a href="#" class="footer-link">عن المنصة</a>
        <a href="#" class="footer-link">اتصل بنا</a>
        <a href="#" class="footer-link">سياسة الخصوصية</a>
        <a href="#" class="footer-link">الشروط والأحكام</a>
      </div>
      
      <div class="copyright">
        © 2024 DEENWAY Ebook Library. جميع الحقوق محفوظة.
      </div>
    </div>
  </footer>

  <script>
    // بيانات الكتب المحسنة
    const books = [
      {
        title: 'الطريق إلى الله',
        description: 'كتاب يشرح الأسس الإيمانية والروحية للتقرب إلى الله تعالى من خلال فهم أسمائه الحسنى وصفاته العليا.',
        coverPath: '',
        pdfPath: '',
        language: 'العربية',
        pages: 240,
        category: 'العقيدة'
      },
      {
        title: 'نور اليقين',
        description: 'مجموعة من الخواطر والتأملات الإيمانية التي تنير القلب وتقوي الصلة بالله تعالى في الحياة اليومية.',
        coverPath: '',
        pdfPath: '',
        language: 'العربية', 
        pages: 180,
        category: 'التزكية'
      },
      {
        title: 'فن الدعوة',
        description: 'دليل عملي للدعوة إلى الله بالحكمة والموعظة الحسنة، مع نماذج تطبيقية من سيرة النبي صلى الله عليه وسلم.',
        coverPath: '',
        pdfPath: '',
        language: 'العربية',
        pages: 320,
        category: 'الدعوة'
      },
      {
        title: 'رياض الصالحين',
        description: 'شرح معاصر لأحاديث النبي صلى الله عليه وسلم مع تطبيقات عملية لحياة المسلم المعاصر.',
        coverPath: '',
        pdfPath: '',
        language: 'العربية',
        pages: 450,
        category: 'الأخلاق'
      },
      {
        title: 'The Path to God',
        description: 'A comprehensive guide to understanding Islamic monotheism and developing a closer relationship with Allah through His beautiful names and attributes.',
        coverPath: '',
        pdfPath: '',
        language: 'English',
        pages: 220,
        category: 'Aqeedah'
      },
      {
        title: 'Light of Certainty', 
        description: 'A collection of spiritual reflections and insights to illuminate the heart and strengthen connection with Allah in daily life.',
        coverPath: '',
        pdfPath: '',
        language: 'English',
        pages: 190,
        category: 'Tazkiyah'
      },
      {
        title: 'Art of Dawah',
        description: 'Practical guide to inviting people to Islam with wisdom and beautiful preaching, with practical models from the Prophets biography.',
        coverPath: '',
        pdfPath: '',
        language: 'English',
        pages: 300,
        category: 'Dawah'
      },
      {
        title: 'Gardens of the Righteous',
        description: 'Contemporary explanation of Prophet Muhammads teachings with practical applications for modern Muslim life.',
        coverPath: '',
        pdfPath: '',
        language: 'English',
        pages: 420,
        category: 'Ethics'
      },
      {
        title: 'Le Chemin Vers Dieu',
        description: 'Guide complet pour comprendre le monothéisme islamique et développer une relation plus étroite avec Allah.',
        coverPath: '',
        pdfPath: '',
        language: 'Français',
        pages: 230,
        category: 'Aqeedah'
      },
      {
        title: 'Lumière de la Certitude',
        description: 'Collection de réflexions spirituelles pour illuminer le cœur et renforcer la connexion avec Allah.',
        coverPath: '',
        pdfPath: '',
        language: 'Français',
        pages: 185,
        category: 'Tazkiyah'
      }
    ];

    // العناصر الرئيسية
    const grid = document.getElementById('grid');
    const searchBox = document.getElementById('searchBox');
    const sectionTitle = document.getElementById('sectionTitle');
    const languageBtn = document.getElementById('languageBtn');
    const languageDropdown = document.getElementById('languageDropdown');
    const currentLanguage = document.getElementById('currentLanguage');
    const languageOptions = document.querySelectorAll('.language-option');

    // اللغة الحالية
    let currentLang = localStorage.getItem('preferredLanguage') || 'ar';
    let searchTerm = '';

    // نصوص الواجهة لكل لغة
    const uiTexts = {
      'ar': {
        searchPlaceholder: 'ابحث عن كتاب...',
        sectionTitle: 'أحدث الكتب',
        noResults: 'لم يتم العثور على كتب تطابق بحثك.',
        noBooks: 'لا توجد كتب متاحة باللغة العربية حالياً.',
        download: 'تحميل',
        preview: 'معاينة',
        pages: 'صفحة'
      },
      'en': {
        searchPlaceholder: 'Search for a book...',
        sectionTitle: 'Latest Books', 
        noResults: 'No books found matching your search.',
        noBooks: 'No books available in English at the moment.',
        download: 'Download',
        preview: 'Preview',
        pages: 'pages'
      },
      'fr': {
        searchPlaceholder: 'Rechercher un livre...',
        sectionTitle: 'Derniers Livres',
        noResults: 'Aucun livre trouvé correspondant à votre recherche.',
        noBooks: 'Aucun livre disponible en français pour le moment.',
        download: 'Télécharger',
        preview: 'Aperçu',
        pages: 'pages'
      },
      'es': {
        searchPlaceholder: 'Buscar un libro...',
        sectionTitle: 'Últimos Libros',
        noResults: 'No se encontraron libros que coincidan con su búsqueda.',
        noBooks: 'No hay libros disponibles en español en este momento.',
        download: 'Descargar',
        preview: 'Vista previa',
        pages: 'páginas'
      },
      'de': {
        searchPlaceholder: 'Buch suchen...',
        sectionTitle: 'Neueste Bücher',
        noResults: 'Keine Bücher gefunden, die Ihrer Suche entsprechen.',
        noBooks: 'Derzeit sind keine Bücher auf Deutsch verfügbar.',
        download: 'Herunterladen',
        preview: 'Vorschau',
        pages: 'Seiten'
      },
      'tr': {
        searchPlaceholder: 'Kitap ara...',
        sectionTitle: 'Son Kitaplar',
        noResults: 'Aramanızla eşleşen kitap bulunamadı.',
        noBooks: 'Şu anda Türkçe kitap mevcut değil.',
        download: 'İndir',
        preview: 'Önizleme',
        pages: 'sayfa'
      },
      'ur': {
        searchPlaceholder: 'کتاب تلاش کریں...',
        sectionTitle: 'تازہ کتابیں',
        noResults: 'آپ کی تلاش سے مماثل کوئی کتاب نہیں ملی۔',
        noBooks: 'فی الحال اردو میں کوئی کتاب دستیاب نہیں ہے۔',
        download: 'ڈاؤن لوڈ',
        preview: 'پیش نظارہ',
        pages: 'صفحات'
      },
      'id': {
        searchPlaceholder: 'Cari buku...',
        sectionTitle: 'Buku Terbaru',
        noResults: 'Tidak ada buku yang ditemukan sesuai pencarian Anda.',
        noBooks: 'Tidak ada buku yang tersedia dalam bahasa Indonesia saat ini.',
        download: 'Unduh',
        preview: 'Pratinjau',
        pages: 'halaman'
      }
    };

    // باقي الكود يتبع نفس المنطق السابق مع التعديلات على النصوص
    // ... (سيتم إكمال الكود في الجزء التالي)

    // الحصول على اسم اللغة من الكود
    function getLanguageName(langCode) {
      const langMap = {
        'ar': 'العربية',
        'en': 'English',
        'fr': 'Français', 
        'es': 'Español',
        'de': 'Deutsch',
        'tr': 'Türkçe',
        'ur': 'اردو',
        'id': 'Indonesia'
      };
      return langMap[langCode] || 'العربية';
    }

    // تحديث واجهة اللغة
    function updateLanguageInterface() {
      const langName = getLanguageName(currentLang);
      currentLanguage.textContent = langName;
      sectionTitle.textContent = uiTexts[currentLang].sectionTitle;
      
      // تحديث الحالة النشطة في القائمة
      languageOptions.forEach(opt => {
        if (opt.getAttribute('data-lang') === currentLang) {
          opt.classList.add('active');
        } else {
          opt.classList.remove('active');
        }
      });
      
      // تحديث نص البحث
      searchBox.placeholder = uiTexts[currentLang].searchPlaceholder;
    }

    // تصفية الكتب حسب اللغة والبحث
    function getFilteredBooks() {
      return books.filter(book => {
        // التصفية حسب اللغة
        const langMatch = book.language === getLanguageName(currentLang);
        
        // التصفية حسب البحث (إن وجد)
        const searchMatch = !searchTerm || 
          book.title.toLowerCase().includes(searchTerm) ||
          (book.description && book.description.toLowerCase().includes(searchTerm)) ||
          (book.category && book.category.toLowerCase().includes(searchTerm));
        
        return langMatch && searchMatch;
      });
    }

    // إنشاء غلاف افتراضي جميل
    function defaultCover(title = 'غلاف الكتاب', language = '', category = '') {
      const safeTitle = escapeXml(title || '');
      const safeLang = escapeXml(language || '');
      const safeCategory = escapeXml(category || '');
      
      const svg = `<svg xmlns='http://www.w3.org/2000/svg' width='600' height='800'>
        <defs>
          <linearGradient id="bg" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#0b3d91;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#5ea0ff;stop-opacity:1" />
          </linearGradient>
          <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
            <feDropShadow dx="0" dy="8" stdDeviation="12" flood-color="#000000" flood-opacity="0.3"/>
          </filter>
        </defs>
        
        <rect width="100%" height="100%" fill="url(#bg)"/>
        
        <!-- نمط خلفية -->
        <circle cx="80%" cy="20%" r="120" fill="white" opacity="0.1"/>
        <circle cx="20%" cy="80%" r="80" fill="white" opacity="0.1"/>
        
        <!-- محتوى الغلاف -->
        <rect x="40" y="40" width="520" height="720" rx="20" fill="white" opacity="0.9" filter="url(#shadow)"/>
        
        <!-- العنوان -->
        <text x="50%" y="45%" dominant-baseline="middle" text-anchor="middle" 
              fill="#0b3d91" font-size="32" font-family="Merriweather, serif" font-weight="700">
          ${safeTitle}
        </text>
        
        <!-- التصنيف -->
        ${safeCategory ? `
        <text x="50%" y="55%" dominant-baseline="middle" text-anchor="middle" 
              fill="#5ea0ff" font-size="18" font-family="Poppins, sans-serif" font-weight="600">
          ${safeCategory}
        </text>
        ` : ''}
        
        <!-- اللغة -->
        ${safeLang ? `
        <text x="50%" y="65%" dominant-baseline="middle" text-anchor="middle" 
              fill="#64748b" font-size="16" font-family="Poppins, sans-serif">
          ${safeLang}
        </text>
        ` : ''}
        
        <!-- زخرفة سفلية -->
        <rect x="100" y="700" width="400" height="4" fill="#0b3d91" opacity="0.7"/>
      </svg>`;
      
      return 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(svg);
    }

    function escapeXml(s) { 
      return String(s).replace(/[<>&'"]/g, c => 
        ({'<':'&lt;','>':'&gt;','&':'&amp;',"'":'&apos;','"':'&quot;'}[c])); 
    }

    // إنشاء بطاقة كتاب
    function createCard(book) {
      const article = document.createElement('article');
      article.className = 'card';
      article.setAttribute('role', 'listitem');
      article.setAttribute('tabindex', '0');
      article.setAttribute('aria-label', `${book.title} - ${book.language}`);

      // حاوية الغلاف
      const coverContainer = document.createElement('div');
      coverContainer.className = 'cover-container';
      
      const img = document.createElement('img');
      img.className = 'cover';
      img.loading = 'lazy';
      img.alt = `${book.title} - غلاف الكتاب`;
      img.src = (book.coverPath && book.coverPath.trim()) ? 
                book.coverPath : 
                defaultCover(book.title, book.language, book.category);
      coverContainer.appendChild(img);

      // الشارات
      const badges = document.createElement('div');
      badges.className = 'book-badges';
      
      const langBadge = document.createElement('div');
      langBadge.className = 'language-badge';
      langBadge.textContent = book.language;
      badges.appendChild(langBadge);
      
      if (book.pdfPath && book.pdfPath.trim()) {
        const statusBadge = document.createElement('div');
        statusBadge.className = 'status-badge';
        statusBadge.innerHTML = '<i class="fas fa-check"></i> متاح';
        badges.appendChild(statusBadge);
      }
      
      coverContainer.appendChild(badges);

      // معلومات الكتاب
      const info = document.createElement('div');
      info.className = 'book-info';
      
      const title = document.createElement('h3');
      title.className = 'book-title';
      title.textContent = book.title || '';
      info.appendChild(title);

      if (book.description) {
        const desc = document.createElement('p');
        desc.className = 'book-description';
        desc.textContent = book.description;
        info.appendChild(desc);
      }

      // البيانات الوصفية والإجراءات
      const meta = document.createElement('div');
      meta.className = 'book-meta';
      
      const pages = document.createElement('div');
      pages.className = 'book-pages';
      pages.innerHTML = `<i class="fas fa-file"></i> ${book.pages || 'N/A'} ${uiTexts[currentLang].pages}`;
      meta.appendChild(pages);
      
      const actions = document.createElement('div');
      actions.className = 'book-actions';
      
      const download = document.createElement('a');
      download.className = 'btn btn-download';
      download.innerHTML = `<i class="fas fa-download"></i> ${uiTexts[currentLang].download}`;
      
      if (book.pdfPath && book.pdfPath.trim()) {
        download.href = book.pdfPath;
        download.target = '_blank';
        download.setAttribute('download', '');
        download.setAttribute('aria-disabled', 'false');
      } else {
        download.href = '#';
        download.setAttribute('aria-disabled', 'true');
        download.addEventListener('click', (e) => { 
          e.preventDefault(); 
          alert('لم يتم إضافة رابط التحميل لهذا الكتاب. ضع pdfPath داخل الكود.'); 
        });
      }
      
      actions.appendChild(download);
      
      // زر المعاينة (يمكن تطويره لاحقاً)
      const preview = document.createElement('button');
      preview.className = 'btn btn-preview';
      preview.innerHTML = `<i class="fas fa-eye"></i> ${uiTexts[currentLang].preview}`;
      preview.addEventListener('click', () => {
        alert('ميزة المعاينة قيد التطوير. ستكون متاحة قريباً!');
      });
      actions.appendChild(preview);
      
      meta.appendChild(actions);
      info.appendChild(meta);
      
      article.appendChild(coverContainer);
      article.appendChild(info);

      return article;
    }

    // عرض الكتب
    function render() {
      const filteredBooks = getFilteredBooks();
      grid.innerHTML = '';
      
      if (filteredBooks.length === 0) {
        const noResults = document.createElement('div');
        noResults.className = 'no-results';
        noResults.innerHTML = `
          <div class="no-results-icon">
            <i class="fas fa-book-open"></i>
          </div>
          <h3>${searchTerm ? uiTexts[currentLang].noResults : uiTexts[currentLang].noBooks}</h3>
          <p>${!searchTerm ? 'جاري العمل على إضافة المزيد من الكتب بهذه اللغة قريباً.' : 'جرب استخدام كلمات بحث مختلفة أو تصفح الكتب بلغة أخرى.'}</p>
        `;
        grid.appendChild(noResults);
      } else {
        filteredBooks.forEach((book) => grid.appendChild(createCard(book)));
      }
    }

    // البحث
    function initSearch() {
      searchBox.addEventListener('input', (e) => {
        searchTerm = e.target.value.toLowerCase().trim();
        render();
      });
    }

    // اختيار اللغة
    function initLanguageSelector() {
      languageBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        languageBtn.classList.toggle('active');
        languageDropdown.classList.toggle('active');
      });

      languageOptions.forEach(option => {
        option.addEventListener('click', () => {
          const lang = option.getAttribute('data-lang');
          currentLang = lang;
          updateLanguageInterface();
          
          languageBtn.classList.remove('active');
          languageDropdown.classList.remove('active');
          
          localStorage.setItem('preferredLanguage', lang);
          render();
        });
      });

      document.addEventListener('click', () => {
        languageBtn.classList.remove('active');
        languageDropdown.classList.remove('active');
      });
    }

    // تهيئة التطبيق
    function initApp() {
      updateLanguageInterface();
      render();
      initSearch();
      initLanguageSelector();
    }

    document.addEventListener('DOMContentLoaded', initApp);
  </script>
</body>
</html>
