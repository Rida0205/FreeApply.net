<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DEEN WAY Ebook</title>
  <style>
    :root{
      --bg:#f7f5f2;
      --accent:#1f7a5a;
      --accent-dark:#165c45;
      --text:#222;
      --card:#fff;
      --shadow: 0 8px 22px rgba(0,0,0,0.12);
      --spine-width:18px;
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:system-ui, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:var(--bg); color:var(--text)}
    .page{min-height:100%;display:flex;flex-direction:column;align-items:center;gap:18px;padding:28px}

    /* Header */
    .header{
      width:100%;
      max-width:1200px;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:8px;
      text-align:center;
    }
    .site-title{
      margin:0;
      font-size:2.1rem;
      color:var(--accent-dark);
      letter-spacing:1px;
    }
    .site-sub{
      margin:0;color:#555;font-size:0.98rem;
    }

    /* Controls note */
    .note{
      font-size:0.9rem;color:#666;
      max-width:1200px;text-align:center;
    }

    /* Grid of books */
    .books-grid{
      width:100%;
      max-width:1200px;
      display:grid;
      grid-template-columns: repeat(4, 1fr); /* 4 in a row on wide screens */
      gap:20px;
      align-items:start;
    }

    /* Each book card */
    .book{
      width:100%;
      aspect-ratio: 9 / 12; /* keeps book-like shape */
      perspective:1100px;
    }

    .book-inner{
      width:100%;
      height:100%;
      position:relative;
      transform-style:preserve-3d;
      transition:transform 0.75s cubic-bezier(.2,.9,.3,1);
      cursor:pointer;
    }
    .book:hover .book-inner,
    .book:focus-within .book-inner{
      transform: rotateY(180deg);
    }

    .book-face{
      position:absolute;
      inset:0;
      backface-visibility:hidden;
      border-radius:8px;
      overflow:hidden;
      box-shadow: var(--shadow);
      background:var(--card);
      display:flex;
      flex-direction:column;
      align-items:stretch;
    }

    .book-front{
      transform: rotateY(0deg);
      border:6px solid #eee7e3;
    }

    .cover{
      flex:1;
      display:flex;
      align-items:center;
      justify-content:center;
      background:linear-gradient(180deg,#fff,#faf9f8);
      position:relative;
    }
    .cover img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }

    .meta{
      padding:10px;
      text-align:center;
      background:linear-gradient(180deg, rgba(0,0,0,0.02), transparent);
    }
    .meta .title{ font-size:0.98rem; margin:4px 0; color:var(--text); font-weight:600 }
    .meta .author{ font-size:0.85rem; margin:0;color:#777 }

    /* Book back */
    .book-back{
      transform: rotateY(180deg);
      padding:14px;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .back-content{
      text-align:right;
      width:100%;
    }
    .back-content h4{ margin:0 0 8px; color:var(--accent-dark); font-size:1rem }
    .back-content p{ margin:0 0 12px; color:#444; font-size:0.9rem; line-height:1.35; max-height:5.4em; overflow:hidden }
    .actions{ display:flex; gap:8px; justify-content:flex-start; align-items:center; margin-top:8px }

    .btn{
      display:inline-block;
      padding:8px 12px;
      border-radius:6px;
      text-decoration:none;
      color:#fff;
      font-weight:600;
      font-size:0.92rem;
    }
    .btn-download{
      background:linear-gradient(180deg,var(--accent),var(--accent-dark));
      box-shadow:0 6px 14px rgba(31,122,90,0.18);
    }
    .btn-view{
      background:#ddd;color:#333;padding:7px 10px;font-weight:600;border-radius:6px;text-decoration:none;
    }

    /* Responsive breakpoints */
    @media (max-width:1024px){
      .books-grid{ grid-template-columns: repeat(3, 1fr); }
    }
    @media (max-width:768px){
      .books-grid{ grid-template-columns: repeat(2, 1fr); }
      .site-title{ font-size:1.6rem }
    }
    @media (max-width:420px){
      .books-grid{ grid-template-columns: 1fr; gap:14px; }
      .site-title{ font-size:1.3rem }
    }

    /* small helper for empty state */
    .empty{ text-align:center;color:#777;padding:18px;border:1px dashed #e2dede;border-radius:8px;background:#fff }
  </style>
</head>
<body>
  <main class="page">
    <header class="header">
      <h1 class="site-title">DEEN WAY Ebook</h1>
      <p class="site-sub">مجموعة كتب — أضف الغلاف والرابط مباشرة في الكود داخل مصفوفة الكتب بالأسفل</p>
    </header>

    <p class="note">أضف عناصر في المصفوفة "books" داخل السكربت: لكل كتاب عيّن coverPath و pdfPath و title و author و description. الزر "تحميل" يستخدم pdfPath.</p>

    <section class="books-grid" id="booksGrid" aria-live="polite">
      <!-- سيتم ملؤه عن طريق JavaScript -->
    </section>

    <footer class="note" style="max-width:1200px;">
      <small>قابل للتعديل بالكامل — المسارات يمكن أن تكون محلية (assets/cover.jpg) أو روابط كاملة (https://...)</small>
    </footer>
  </main>

  <script>
    // مصفوفة الكتب: عدّل أو أضف كتب هنا مباشرة
    const books = [
      // مثال: عدّل المسارات والنصوص هنا
      {
        title: 'الكتاب الأول',
        author: 'المؤلف أ',
        description: 'نبذة قصيرة عن الكتاب الأول. ضع هنا وصفًا يشرح محتواه وفائدته.',
        coverPath: '', // استبدل بمسار الصورة أو رابطها، مثال: 'assets/cover1.jpg' أو 'https://.../cover1.jpg'
        pdfPath: ''    // استبدل بمسار PDF أو رابط مباشر، مثال: 'books/book1.pdf' أو 'https://.../book1.pdf'
      },
      {
        title: 'الكتاب الثاني',
        author: 'المؤلف ب',
        description: 'نبذة قصيرة عن الكتاب الثاني.',
        coverPath: '',
        pdfPath: ''
      },
      {
        title: 'الكتاب الثالث',
        author: 'المؤلف ج',
        description: 'وصف تجريبي للكتاب الثالث.',
        coverPath: '',
        pdfPath: ''
      },
      {
        title: 'الكتاب الرابع',
        author: 'المؤلف د',
        description: 'وصف تجريبي للكتاب الرابع.',
        coverPath: '',
        pdfPath: ''
      },
      // أضف المزيد من العناصر هنا حسب الحاجة
    ];

    const booksGrid = document.getElementById('booksGrid');

    // دالة للحصول على صورة افتراضية (Data URI SVG) إذا لم تُحدد coverPath
    function defaultCoverDataURI(title = 'غلاف الكتاب'){
      const svg = `<svg xmlns='http://www.w3.org/2000/svg' width='600' height='800'>
        <rect width='100%' height='100%' fill='#f3ece9'/>
        <text x='50%' y='48%' dominant-baseline='middle' text-anchor='middle' fill='#1f7a5a' font-size='30' font-family='Arial, sans-serif'>${escapeXml(title)}</text>
      </svg>`;
      return 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(svg);
    }

    function escapeXml(unsafe) {
      return unsafe.replace(/[<>&'"]/g, function (c) {
        switch (c) {
          case '<': return '&lt;';
          case '>': return '&gt;';
          case '&': return '&amp;';
          case "'": return '&apos;';
          case '"': return '&quot;';
        }
      });
    }

    // بناء عنصر HTML لكل كتاب
    function createBookCard(book){
      const wrap = document.createElement('article');
      wrap.className = 'book';
      wrap.setAttribute('tabindex','0');
      wrap.setAttribute('aria-label', `كتاب: ${book.title}`);

      const inner = document.createElement('div');
      inner.className = 'book-inner';

      // الواجهة الأمامية
      const front = document.createElement('div');
      front.className = 'book-face book-front';

      const cover = document.createElement('div');
      cover.className = 'cover';
      const img = document.createElement('img');
      img.alt = book.title || 'غلاف الكتاب';
      img.src = book.coverPath && book.coverPath.trim() !== '' ? book.coverPath : defaultCoverDataURI(book.title || 'غلاف الكتاب');
      cover.appendChild(img);

      const meta = document.createElement('div');
      meta.className = 'meta';
      const t = document.createElement('div');
      t.className = 'title';
      t.textContent = book.title || '-';
      const a = document.createElement('div');
      a.className = 'author';
      a.textContent = book.author || '';
      meta.appendChild(t);
      meta.appendChild(a);

      front.appendChild(cover);
      front.appendChild(meta);

      // الواجهة الخلفية
      const back = document.createElement('div');
      back.className = 'book-face book-back';

      const backContent = document.createElement('div');
      backContent.className = 'back-content';
      const h4 = document.createElement('h4');
      h4.textContent = book.title || '';
      const p = document.createElement('p');
      p.textContent = book.description || '';
      backContent.appendChild(h4);
      backContent.appendChild(p);

      const actions = document.createElement('div');
      actions.className = 'actions';

      const download = document.createElement('a');
      download.className = 'btn btn-download';
      download.textContent = '⤓ تحميل';
      if (book.pdfPath && book.pdfPath.trim() !== ''){
        download.href = book.pdfPath;
        download.setAttribute('download', '');
        download.setAttribute('target','_blank');
      } else {
        // إذا لم يوجد رابط؛ نستخدم زر معطّل يفتح تنبيه
        download.href = '#';
        download.addEventListener('click', function(e){
          e.preventDefault();
          alert('لم يتم ضبط رابط الـ PDF لهذا الكتاب. عدّل الخاصية pdfPath في الكود.');
        });
      }

      const view = document.createElement('a');
      view.className = 'btn btn-view';
      view.textContent = 'معاينة';
      if (book.pdfPath && book.pdfPath.trim() !== ''){
        view.href = book.pdfPath;
        view.setAttribute('target','_blank');
      } else {
        view.href = '#';
        view.addEventListener('click', function(e){
          e.preventDefault();
          alert('لم يتم ضبط رابط الـ PDF لهذا الكتاب.');
        });
      }

      actions.appendChild(download);
      actions.appendChild(view);
      backContent.appendChild(actions);
      back.appendChild(backContent);

      inner.appendChild(front);
      inner.appendChild(back);
      wrap.appendChild(inner);

      return wrap;
    }

    // Render all books
    function renderBooks(list){
      booksGrid.innerHTML = '';
      if (!Array.isArray(list) || list.length === 0){
        const empty = document.createElement('div');
        empty.className = 'empty';
        empty.textContent = 'لا توجد كتب لعرضها. أضف عناصر في مصفوفة "books" داخل الكود.';
        booksGrid.appendChild(empty);
        return;
      }
      list.forEach(book => {
        const card = createBookCard(book);
        booksGrid.appendChild(card);
      });
    }

    // شغل العرض عند التحميل
    document.addEventListener('DOMContentLoaded', function(){
      renderBooks(books);
    });

    // ملاحظة لمطوّر: لتعديل الكتب أضف عنصرًا جديدًا داخل "books" مع الحقول: title, author, description, coverPath, pdfPath.
    // أمثلة سريعة:
    // books.push({ title:'كتاب جديد', author:'اسم', description:'نبذة...', coverPath:'assets/new.jpg', pdfPath:'books/new.pdf' });
    // ثم نفّذ renderBooks(books) أو أعد تحميل الصفحة.
  </script>
</body>
</html>
